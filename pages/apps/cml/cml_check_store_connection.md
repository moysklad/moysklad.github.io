---
title: CommerceML — проверка подключения магазина
tags: [cml, commerceml]
keywords:
summary:
sidebar: cml_sidebar
permalink: /workbook/apps/cml/check_store_connection.html
folder: workbook
---
## Проверка работы коннектора

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Создать коннектор с интернет-магазином <br> 2. Заполнить поля с адресом магазина, логин, пароль <br> 3. Нажать "Проверить соединение"|Выдается сообщение "Cоединение прошло успешно"| 
|2|Запустить Выгрузку остатков|Выгрузка остатков закончилась без ошибок. <br> Указано корректное количество выгруженных товаров.| 
|3|Запустить Загрузку заказов|Загрузка заказов закончилась без ошибок. <br> Загружено корректное количество заказов. <br> В статусном сообщении указаны номера заказов.| 

## Проверка выгрузки остатков

### Выгрузка остатков

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Создать товар <br> 2. В разделе Закупки создать документ Приемка <br> 3. В документе добавить созданный товар и указать количество <br> 4. В коннекторе запустить выгрузку остатков|Товар выгрузился в интернет магазин с положительным остатком.| 
|2|1. Создать товар <br> 2. В разделе Продажи создать документ Отгрузка <br> 3. В документе добавить созданный товар и указать количество <br> 4. В коннекторе запустить выгрузку остатков|Товар выгрузился в интернет магазин с отрицательным или нулевым остатком.| 
|3|1. Создать товар <br> 2. В разделе Закупки создать документ Приемка <br> 3. В документе добавить созданный товар и указать количество <br> 4. В разделе Продажи создать документ Заказ покупателю <br> 5. В документе добавить созданный товар и указать количество равное количеству в приемке <br> 6. Поставить позиции в резерв, нажав кнопку Зарезирвировать (или установить чекбокс "Резерв" в новом редакторе) <br> 7. Для проверки: В отчете Остатки (раздел Склад) у товара должно быть нулевое доступно <br> 8. В коннекторе запустить выгрузку остатков|Товар выгрузился в интернет магазин с нулевым остатком.| 
|4|1. Создать товар <br> 2. В разделе Закупки создать документ Заказ поставщику <br> 3. В документе добавить созданный товар и указать количество <br> 4. Поставить позиции в ожидание <br> 5. В коннекторе запустить выгрузку остатков|Товар выгрузился в интернет магазин с положительным остатком.| 

### Выгрузка данных товара 

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Создать несколько товаров <br> 2. Заполнить указанные поля у товаров: <br> &nbsp;&nbsp; - Наименование <br> &nbsp;&nbsp; - Артикул <br> &nbsp;&nbsp; - Страна <br> &nbsp;&nbsp; - Единица измерения <br> &nbsp;&nbsp; - НДС <br> &nbsp;&nbsp; - Описание <br> 3. В коннекторе запустить выгрузку остатков|Указанные поля (если таковые имеются в карточке товара в интернет-магазине) заполнились корректно.|   
|2|1. Изменить все указанные поля у созданных товаров <br> 2. В коннекторе запустить выгрузку остатков|Поля товара в интернет-магазине обновились.|   

### Выгрузка цен и валют
Из МоегоСклада возможна выгрузка следующих цен продажи:

+ Минимальная
+ Закупочная
+ Одна из цен продажи (Розничная)

Выбор выгружаемой цены продажи осуществляется в настройках коннектора в поле "Цены".

При создании коннектора в поле "Цены" устанавливается значение цены продажи по-умолчанию.

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Заполнить цены у товаров <br> 2. Указать валюту у цен <br> 3. В коннекторе запустить выгрузку остатков|Все цены и валюты выгрузились корректно.|   
|2|1. Изменить цены у товаров <br> 2. Изменить валюту у цен <br> 3. В коннекторе запустить выгрузку остатков|Все цены и валюты обновились корректно.|   

### Выгрузка групп товаров

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Поместить товар в корневую группу <br> 2. Поместить товар в группу <br> 3. Поместить товар в подгруппу <br> 4. В коннекторе запустить выгрузку остатков|Товар корневой группы выгрузился.<br>При выгрузке иерархия групп сохранилась.|
|2|1. Поместить товар из корня в группу <br> 2. Поместить товар из группы в корень <br> 3. Поменять группы у товаров <br> 4. В коннекторе запустить выгрузку остатков|Товар из корня переместился в группу. <br> Товар из группы переместился в корень. <br> У товаров изменились группы. <br> При выгрузке иерархия групп сохранилась.|
|3|1. Изменить вложенность групп <br> 2. В коннекторе запустить выгрузку остатков|При выгрузке иерархия групп изменилась.|
|4|1. Обновить наименования групп <br> 2. В коннекторе запустить выгрузку остатков|Наименования групп обновились.|

### Модификации товаров

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Создать товар <br> 2. Добавить несколько модификаций товару с несколькими характеристиками (Например: Размер и Цвет) <br> 3. В МоемСкладе в коннекторе установить чекбокс "Выгружать остатки с учетом характеристик" <br> 4. В коннекторе запустить выгрузку остатков|Выгрузка остатков прошла успешно. <br><br> Модификации создались. <br> Характеристики соответствуют созданным в МоемСкладе.|
|2|1. Отредактировать модификации у товаров: <br> 2. Изменить названия характеристик <br> 3. Изменить значения характеристик <br> 4. оменять порядок характеристик <br> 5. В коннекторе запустить выгрузку остатков|Выгрузка остатков прошла успешно. <br><br> Характеристики товаров обновились и соответствуют характеристикам в МоемСкладе.|
|3|1. Создать заказ <br> 2. Добавить в заказ модификации созданные в интернет-магазине <br> 3. В МоемСкладе в настройках коннектора установить чекбокс "Создавать характеристики" <br> 4. В коннекторе запустить загрузку заказов|Заказы загрузились. <br><br> Загруженные модификации соответствуют модификациям добавленным в заказ в интернет-магазине.|

## Проверка загрузки заказов
### Загрузка и обновление заказов

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. Создать заказ в интернет магазине <br> 2. В коннекторе запустить загрузку заказов <br> 3. Повторно запустить загрузку заказов | Первая выгрузка заказов прошла успешно. <br> При повторной загрузке заказов - заказы не загрузились.|
|2|1. Создать заказ в интернет магазине <br> 2. В коннекторе запустить загрузку заказов <br> 3. Изменить заказ в интернет магазине <br> 4. В коннекторе запустить загрузку заказов|Заказы обновились при повторной загрузке.|

### Загрузка товаров из заказа

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. В интернет магазине создать заказ <br> 2. Добавить товары созданные в Интернет-магазине <br> 3. Добавить товары выгруженные из МоегоСклада | Заказы загрузились. <br><br> При выгрузке, товары созданные в интернет-магазине создались в МоемСкладе.<br> С выгрузкой заказов в МоемСкладе не создалось дубликатов товаров.  <br> Суммы и количество в загруженных заказах соответствуют.|
|2|1. В коннекторе запустить выгрузку остатков | С выгрузкой остатков в интернет магазине не создалось дубликатов товаров.|

### Статусы заказов

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. В интернет магазине создать заказ <br> 2. В коннекторе запустить загрузку заказов | Заказ выгрузился успешно. <br><br> У заказа загрузился статус.|
|2|1. В интернет магазине изменить статус у заказа <br> 2. В коннекторе запустить загрузку заказов | Заказ выгрузился успешно. <br><br> У заказа обновился статус.|

### Пользовательские поля

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. В интернет магазине создать заказ <br> 2. Заполнить все поля в заказе <br> 3. В коннекторе запустить загрузку заказов <br> 4. В коннекторе, на вкладке "Отчет" скачать Импортированный файл <br> 5. В МоемСкладе завести пользовательские поля, в качестве наименования указав одноименные значения из раздела xml-документа "ЗначенияРеквизитов" <br> 6. В интернет магазине создать новый заказ или обновить существующий <br> 7. В коннекторе запустить загрузку заказов | Загрузка заказов прошла успешно. <br><br> Созданные пользовательские поля заполнились корректными данными|

## Загрузка данных контрагента

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. В интернет магазине создать заказ <br> 2. Указать информацию по покупателю: <br> 3. Выбрать тип покупателя (Юридическое или Физизическое лицо) <br> 4. Заполнить указанные поля: <br> &nbsp;&nbsp; - Наименование <br> &nbsp;&nbsp; - Почта <br> &nbsp;&nbsp; - Телефон <br> &nbsp;&nbsp; - Адресные поля <br> &nbsp;&nbsp; - Если пользователь юридическое лицо: <br> &nbsp;&nbsp;&nbsp;&nbsp; - ИНН  <br> &nbsp;&nbsp;&nbsp;&nbsp; - КПП  <br> &nbsp;&nbsp;&nbsp;&nbsp; - Юридический адрес <br> 5. В коннекторе запустить загрузку заказов| Загрузка заказов прошла успешно. <br><br> Тип контрагента определился корректно. <br> Все поля заполнились корректными данными.|

## Дополнительные возможности
### Синхронизация статусов заказа

| № | Шаги воспроизведения | Ожидаемый результат
|----|----|----|
|1|1. В коннекторе установить чекбокс "Отправлять статусы заказов в ИМ" <br> 2. Загрузить заказы из интернет магазина <br> 3. В МоемСкладе создать из загруженного заказа Отгрузку <br> 4. В МоемСкладе создать из загруженного заказа Входящий платеж <br> 5. В коннекторе запустить загрузку заказов| Загрузка заказов прошла успешно. <br><br> Статусы заказов обновились, содержимое заказов осталось прежним|


 